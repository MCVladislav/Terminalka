#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#define epsilon 1e-6
void p(float**mus, int m, int n){
    for(int i=0; i<m; i++){
        for(int j=0; j<n; j++){
            printf("%f ", mus[i][j]);
        }
        printf("\n");
    }
}
int main()
{
    int m=0, n=0;
    int per=0;
    float c=0;
    scanf("%d%d", &m, &n);
    float**mus=(float**)malloc(m*sizeof(float*));
    for(int i=0; i<m; i++){
        mus[i]=(float*)malloc(n*sizeof(float));
    }
    for(int i=0; i<m; i++){
        for(int j=0; j<n; j++){
            scanf("%f", &mus[i][j]);
        }
    }
    for(int i=0, v=0; i<m-1; i++, v++){
        if(fabs(mus[i][v])>epsilon){
            for(int l=i+1; l<m; l++){
                per=-mus[l][v]/mus[i][v];
                for(int j=v; j<n; j++){
                    mus[l][j]+=per*mus[i][j];
                }
            }
        }
        else{
            for(int k=v; k<m; k++){
                if(fabs(mus[k][v])>epsilon){
                    for(int p=0; p<n; p++){
                        c=mus[i][p];
                        mus[i][p]=mus[k][p];
                        mus[k][p]=c;
                    }
                    i--;
                    break;
                }
            }
            i--;
        }
    }
    p(mus, m, n);
    return 0;
}
